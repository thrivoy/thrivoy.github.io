<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Thrivoy ‚Äî Onboard</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;margin:0;background:#f7f8fb}
    .container{max-width:900px;margin:30px auto;padding:24px;background:#fff;border-radius:10px;box-shadow:0 6px 24px rgba(0,0,0,.08)}
    h1{margin-top:0;color:#333}
    label{display:block;margin-top:14px;font-weight:bold}
    input,select,textarea{width:100%;padding:10px;margin-top:4px;border:1px solid #ccc;border-radius:6px}
    textarea{min-height:70px}
    button{margin-top:18px;padding:12px;background:#2f80ed;color:#fff;border:0;border-radius:6px;cursor:pointer;font-weight:bold;width:100%}
    .loading{display:none;margin-top:10px;color:#666}
    .result{margin-top:16px;padding:12px;border-radius:8px;display:none}
    .result.success{background:#e9f7ef;color:#0b7a4e}
    .result.error{background:#fff0f0;color:#8a1f1f}
  </style>
</head>
<body>
  <div class="container">
    <h1>üöÄ Thrivoy Onboarding</h1>
    <form id="onboardForm">
      <label>Business Name *</label>
      <input id="businessName" name="businessName" required />
      <label>Owner Name *</label>
      <input id="ownerName" name="ownerName" required />
      <label>Email *</label>
      <input type="email" id="email" name="email" required />
      <label>Phone *</label>
      <input type="tel" id="phone" name="phone" required />
      <label>Category *</label>
      <select id="category" name="category" required>
        <option value="">Choose‚Ä¶</option>
        <option>Services</option><option>Consulting</option>
        <option>Technology</option><option>Healthcare</option>
        <option>Education</option><option>Insurance</option>
      </select>
      <label>Location *</label>
      <input id="location" name="location" required />
      <label>Description *</label>
      <textarea id="description" name="description" required></textarea>

      <h3>Intelligence Questions</h3>
      <label>Target Audience</label>
      <input id="audience" name="audience" />
      <label>Unique Value</label>
      <input id="uniqueValue" name="uniqueValue" />
      <label>Key Benefits</label>
      <input id="benefits" name="benefits" />
      <label>Problem Solved</label>
      <input id="problemSolved" name="problemSolved" />
      <label>Success Story</label>
      <textarea id="successStory" name="successStory"></textarea>

      <button type="submit" id="submitBtn">üéØ Create My Business Website</button>
    </form>
    <div id="loading" class="loading">‚è≥ Submitting...</div>
    <div id="result" class="result"></div>
  </div>

  <script>
    const APPS_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzfKDe7l0mCabFqCeGE5d3gNw_Hyjy8GlbgpGxpkGoZvFBnl9iWFFLD8lnMOydbxaaE/exec";

    document.getElementById("onboardForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const loading = document.getElementById("loading");
      const result = document.getElementById("result");
      result.style.display="none";
      loading.style.display="block";

      const formData = new FormData(e.target);
      const data = Object.fromEntries(formData.entries());
      data.action = "onboard";

      try {
        const resp = await fetch(APPS_SCRIPT_URL, {
          method: "POST",
          headers: { "Content-Type": "application/x-www-form-urlencoded" },
          body: new URLSearchParams(data).toString()
        });
        const json = await resp.json();
        loading.style.display="none";
        if (json.success) {
          result.className="result success";
          result.style.display="block";
          result.innerHTML = `‚úÖ Success! Business ID: ${json.businessId || ""}`;
          setTimeout(()=> {
            window.location.href =
              "https://thrivoydirect.github.io/site/thankyou.html?businessId=" +
              encodeURIComponent(json.businessId);
          }, 2000);
        } else {
          result.className="result error";
          result.style.display="block";
          result.innerText = "‚ùå " + (json.error||"Unknown error");
        }
      } catch(err) {
        loading.style.display="none";
        result.className="result error";
        result.style.display="block";
        result.innerText = "‚ùå Network error: " + err.message;
      }
    });
  </script>
</body>
</html>
